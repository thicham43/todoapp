{% extends "todo_app/base.html" %}

{% block container %}

    {% if not all_tasks %} <p>No tasks are planned yet.</p> {% endif %}

    <div class="flex justify-between">
        <strong class="self-end text-blue-300">{{ count_tasks }} Tasks </strong>
        <a href="{% url "todo_app:add_task" %}" class="p-1 rounded-lg bg-indigo-700 text-gray-200 border border-blue-600 hover:border-blue-500">New Task</a>
    </div>
    <div class="mt-3">
        {% if all_tasks %}
            <table class="table-auto w-full">
                <thead class="text-blue-300 font-semibold uppercase">
                    <td class=" px-4 py-2">Title</td>
                    <td class=" px-4 py-2">Comment</td>
                    <td class=" px-4 py-2">Scheduled For</td>
                    <td class=" px-4 py-2">Overdue ?</td>
                    <td class="px-4 py-2"></td>
                </thead>
                <tbody class="bg-indigo-700 text-gray-300">
                    {% for task in all_tasks %}
                        <tr>
                            <td class="px-4 py-2">{{ task.title }}</td>
                            <td class="px-4 py-2">{{ task.comment }}</td>
                            <td class="px-4 py-2">{{ task.schedule_date }}</td>
                            <td class="px-4 py-2">
                                {% if task.is_overdue %}
                                    {{ task.days_overdue }} Day{{ task.days_overdue|pluralize }} ago
                                {% else %}
                                    Not yet
                                {% endif %}
                            </td>
                            <td class="p-2 flex justify-center font-thin text-sm text-gray-500 hover:text-gray-300">
                                <a href="{% url "todo_app:update_task" task.id %}" class="hover:bg-indigo-800 rounded px-2">EDIT</a>
                                <a href="{% url "todo_app:delete_task" task.id %}" class="hover:bg-indigo-800 rounded px-2">DELETE</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% endif %}
    </div>

{% endblock %}
